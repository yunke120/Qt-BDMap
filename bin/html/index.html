<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
		body,
		html,
		#allmap {
			width: 100%;
			height: 100%;
			overflow: hidden;
			margin: 0;
			font-family: "微软雅黑";
		}
	</style>
	<!-- 百度地图3.0 离线API Begin -->
	<script type="text/javascript" src="./map3.0_init.js"></script>
	<script type="text/javascript" src="./map3.0.js"></script>
	<script type="text/javascript" src="./qwebchannel.js"></script> <!-- 与qt交互 -->
	<!--script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0"></script-->
	<!-- 百度地图3.0 End -->
	<title>地图展示</title>
</head>

<body>
	<div id="allmap"></div>
</body>

</html>
<script type="text/javascript">
	// 百度地图API功能
	var map = new BMap.Map("allmap");    // 创建Map实例
	map.centerAndZoom(new BMap.Point(113.557892, 34.8333), 15);  // 初始化地图,设置中心点坐标和地图级别
	//添加地图类型控件
	map.addControl(new BMap.MapTypeControl({
		mapTypes:[
	        BMAP_NORMAL_MAP,
	        BMAP_SATELLITE_MAP,
	        BMAP_HYBRID_MAP
	    ]}));	
	//离线不支持
	//map.setCurrentCity("北京");          // 设置地图显示的城市 此项是必须设置的

	map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放

	// 创建标点  
	var point = new BMap.Point(113.557892,34.8333);
	var marker = new BMap.Marker(point);        // 创建标注   
	map.addOverlay(marker);
	// marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画

	new QWebChannel(qt.webChannelTransport,
		function (channel) {
			window.JSInterface = channel.objects.JSInterface; // 注册
		}
	);

	function myMarker(lng, lat) {
		allMarker = map.getOverlays(); //保存所有标注
		var newpoint = new BMap.Point(lng, lat);  
		var newmarker = new BMap.Marker(newpoint);        // 创建标注
		map.addOverlay(newmarker);
		//alert('ok');
	};

	function drawLine(lng1,lat1,lng2,lat2) {
		var line = new BMap.Polyline([
			new BMap.Point(lng1, lat1),
			new BMap.Point(lng2, lat2)
		], {strokeColor:"red", strokeWeight:2, strokeOpacity:1});
		map.addOverlay(line);
	}
</script>