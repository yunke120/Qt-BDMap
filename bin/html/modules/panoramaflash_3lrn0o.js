/**/_jsload2&&_jsload2('panoramaflash', 'z.extend(Ra.prototype,{Fi:function(){for(var a=0;a<D.Mq.length;a++)D.Mq[a](this);this.If!=s&&this.dispatchEvent(new Q("onvisible_poi_type_changed"),{visiblePOIType:this.If});this.Tk=this.Yg();this.$q=this.hd=t;this.Yp={};this.gd=new kk(this);this.vR();this.iP();this.kP();if(this.bb||this.Lb)this.bb?this.Cc(this.bb,this.Ie):this.ua(this.Lb)},kP:function(){var a=this;setInterval(function(){if(a.Xb()){var b=a.Yg();b.oc(a.Tk)||(a.gd.set("size",{width:b.width,height:b.height}),a.Tk=b,a.dispatchEvent(new Q("size_changed")))}}, 80)},vR:function(){var a=this.gd,b=this;a.addEventListener("clicked_position",function(a){b.dispatchEvent(new Q("onclicked_position"),a)});a.addEventListener("thumbnail_complete",function(){b.dispatchEvent(new Q("onthumbnail_complete"))});a.addEventListener("indoor_enter",function(a){a.data.e4===s?b.Bk({haveBreakId:t}):b.Bk({haveBreakId:p});b.dispatchEvent(new Q("onhaveBreakId_changed"))});a.addEventListener("first_thumb_complete",function(){var a,e;if(b.hd!==p){b.hd=p;a=this;b.bb=a.get("id");"street"!= b.Ie&&(b.Ie="street",b.Rx("inter"));b.yn=a.get("links");e=a.get("position");b.Lb=e;e=a.get("pov");!b.Ha.heading&&!b.Ha.pitch?b.Ha=e:(e.heading!=b.Ha.heading||e.pitch!=b.Ha.pitch)&&a.set("pov",b.Ha);e=a.get("zoom");1==!b.Kc&&1!=e?b.Kc==e:b.Kc!=e&&a.set("zoom",b.Kc);e=s;for(var f in b.He)e=b.He[f],delete b.He[f],b.Pa(e);b.m.navigationControl===t&&a.set("navigationControlVisible",t);var g=function(b){a.Pr("toggleUI",{topo:b.linksControl,wellLid:b.clickOnRoad,innerExit:t,innerFloor:b.indoorFloorControl})}; g(b.m);b.addEventListener("clickonroad_changed",function(){g(b.m)});b.addEventListener("links_visible_changed",function(){g(b.m)});b.addEventListener("onindoorfloor_options_changed",function(){g(b.m)});b.addEventListener("navigation_visible_changed",function(){a.set("navigationControlVisible",b.m.navigationControl)});if(0<b.Lg.length){f=0;for(e=b.Lg.length;f<e;f++)b.Lg[f].register(b.P,b,b.gd);var i="",k=[];f=0;for(e=b.Oq.length;f<e;f++)i=b.Oq[f].UL,k=b.Oq[f].TL,b[i].apply(b,k)}b.m.visible?b.show(): b.aa()}});a.addEventListener("pano_error",function(){b.dispatchEvent(new Q("error"))});a.addEventListener("id_changed",function(a){if(b.hd||b.bb==s||"inter"==b.Ie)b.bb=a.data;b.dispatchEvent(new Q("onid_changed"))});a.addEventListener("position_changed",function(a){b.hd?b.Lb=b.gd.get("position"):b.Lb==s&&(b.Lb=a.data);b.dispatchEvent(new Q("onposition_changed"))});a.addEventListener("pov_changed",function(a){if(b.hd||b.Ha.heading==s)b.Ha=a.data;b.dispatchEvent(new Q("onpov_changed"))});a.addEventListener("links_changed", function(a){if(b.hd||0==b.yn.length)b.yn=a.data;b.dispatchEvent(new Q("onlinks_changed"))});a.addEventListener("zoom_changed",function(a){if(b.hd||b.Kc==s)b.Kc=a.data;b.dispatchEvent(new Q("onzoom_changed"))});a.addEventListener("sdata_loaded",function(a){b.Rx(a.data.panoType);b.dispatchEvent(new Q("oncopyright_changed"),{copyright:a.data.copyright});if(b.$q){for(var e in b.Yp)b[e](b.Yp[e]);b.$q=t;b.Yp={}}});a.addEventListener("overlay_mouseclick",function(a){a=b.He[a.data.markerId];a.dispatchEvent(new Q("onclick"), {type:"click",target:a})});a.addEventListener("overlay_mouseover",function(a){a=b.He[a.data.markerId];a.dispatchEvent(new Q("onmouseover"),{type:"mouseover",target:a})});a.addEventListener("overlay_mouseout",function(a){a=b.He[a.data.markerId];a.dispatchEvent(new Q("onmouseout"),{type:"mouseout",target:a})})},iP:function(){var a=this;z.V(this.P,ja.ga.Qe?"DOMMouseScroll":"onmousewheel",function(b){if(a.m.enableScrollWheelZoom&&a.m.visible){var c=-b.detail/3||b.wheelDelta/120,c=a.ka()+c;a.Qc(c);Db(b)}})}, Cc:function(a,b,c){"object"===typeof b&&(c=b,b=l);if(!this.hd||a&&a!=this.bb)this.hd||(this.bb=a,this.Ie=b||"street",this.Lb=s),this.gd.set("id",{id:a,type:b||"street"}),this.$q=p,c&&c.pov&&this.od(c.pov)},ua:function(a){if(!this.hd||a&&!this.Lb.oc(a))this.hd||(this.Lb=a,this.bb=s),this.gd.set("position",a),this.$q=p},od:function(a){a&&(90<a.pitch&&(a.pitch=90),-90>a.pitch&&(a.pitch=-90),this.hd?this.$q?this.Yp.setPov=a:this.gd.set("pov",a):this.Ha=a)},Qc:function(a){a!=this.Kc&&(a>ze&&(a=ze),a<Ae&& (a=Ae),this.hd?this.gd.set("zoom",a):this.Kc=a,this.Yp.setZoom=a)},show:function(){this.m.visible=p;this.wf&&(this.M&&this.M.Ua()===this.P)&&z.R.show(this.wf);this.gd&&this.gd.Lq&&(this.gd.Lq.style.left="0");this.hd&&(this.fl===this.Xb()&&this.gd.set("id",{id:this.fl,type:this.KR||"street"}),this.dispatchEvent(new Q("onvisible_changed")))},aa:function(){this.m.visible=t;this.hd&&(this.fl=this.bb,this.KR=this.Ie,this.gd.Pr("closePano"));this.bb=s;this.gd&&this.gd.Lq&&(this.gd.Lq.style.left="-9999px"); this.dispatchEvent(new Q("onvisible_changed"))},gB:function(a){function b(a,b){return function(){a.Oq.push({UL:b,TL:arguments})}}if(this.hd)a.register(this.P,this,this.gd);else for(var c=a.getPanoMethodList(),e="",f=0,g=c.length;f<g;f++)e=c[f],this[e]=b(this,e);this.Lg.push(a)},iE:function(a){this.hd&&a.dispose();for(var b=this.Lg.length;b--;)this.Lg[b]===a&&this.Lg.splice(b,1)},mt:function(a){this.If=a||"none";this.dispatchEvent(new Q("onvisible_poi_type_changed"),{visiblePOIType:this.If})},Pa:function(a){this.He[a.kd]= a;this.hd&&this.dispatchEvent(new Q("onadd_overlay"),{overlay:a})},Sb:function(a){var b=a.kd;this.hd&&this.dispatchEvent(new Q("onremove_overlay"),{overlay:a});delete this.He[b]},wo:function(){var a=this.gd.get("indoorData");a&&a.pid&&this.Cc(a.pid)},wE:function(a){this.gd.set("interactiveState",a)}});wj=Ra.prototype; U(wj,{setId:wj.Cc,setPosition:wj.ua,setPov:wj.od,setZoom:wj.Qc,show:wj.show,hide:wj.aa,addPlugin:wj.gB,removePlugin:wj.iE,addOverlay:wj.Pa,removeOverlay:wj.Sb,setPanoramaPOIType:wj.mt,exitInter:wj.wo,setInteractiveState:wj.wE});function lk(){this.hS=(this.Dz=window.ActiveXObject&&!(window.opera&&!window.opera.nodeType))?\' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"\':\' type="application/x-shockwave-flash"\';this.wH=["id","width","height","align","data"];this.xH="wmode movie flashvars scale quality play loop menu salign bgcolor base allowscriptaccess allownetworking allowfullscreen seamlesstabbing devicefont swliveconnect".split(" ")} z.extend(lk.prototype,{create:function(a,b){var c=this.EQ(a);b&&"string"===typeof b&&(b=document.getElementById(b));b?b.innerHTML=c:document.write(c)},remove:function(a){if((a=this.HK(a))&&this.Dz){a.style.display="none";for(var b in a)"function"===typeof a[b]&&(a[b]=s);window.oO&&setTimeout(window.oO,0)}a.parentNode.removeChild(a)},uW:function(){function a(){var c=function(){var a=navigator;if(a.plugins&&a.mimeTypes.length){if((a=a.plugins["Shockwave Flash"])&&a.description)return a.description.replace(/([a-zA-Z]|\\s)+/, "").replace(/(\\s)+r/,".")+".0"}else if(b.Dz)try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(c)return c.GetVariable("$version").replace(/WIN/g,"").replace(/,/g,".")}catch(g){}}();a=function(){return c};return c}var b=this;return a()},HK:function(a){return document.getElementById(a)},kG:function(a,b){for(var a=a.split("."),b=b.split("."),c=Math.max(a.length,b.length),e=0;e<c;e++){var f=a[e],g=b[e];if(!f||!g)return!f&&!g?0:f?1:-1;f=Number(f);g=Number(g);if(f<g)return-1;if(f>g)return 1}return 0}, EQ:function(a){a=a||{};a.movie=a.url||"";a.altHtml=a.errorMessage||"";if(a.vars){var b=a.vars,c=[],e=s,f=s;for(e in b)f=b[e],c.push(e+"="+encodeURIComponent(f));a.flashvars=c.join("&")}a.minVer=a.ver;b=a.minVer;c=a.maxVer;if(b||c)if(e=this.uW(),!e||b&&0>this.kG(e,b)||c&&0<this.kG(e,c))return a.altHtml||"";e=["<object",this.hS];a.data=a.movie;for(b=0;b<this.wH.length;b++)c=this.wH[b],a.hasOwnProperty(c)&&e.push(" ",c,\'="\',a[c],\'"\');e.push(">");for(b=0;b<this.xH.length;b++)c=this.xH[b],a.hasOwnProperty(c)&& e.push(\'<param name="\',c,\'" value="\',a[c],\'"/>\');e.push("</object>");return e.join("")}});function mk(a,b){this.W=a;this.AQ=b;this.Dh={};this.Gy()}z.extend(mk.prototype,{Gy:function(){var a=this,b=a.W;b.addEventListener("add_overlay",function(b){b=b.overlay;b.xa(a.W,a.AQ);a.Dh[b.kd]=b});b.addEventListener("remove_overlay",function(b){b=b.overlay;b.remove();delete a.Dh[b.kd]})}});z.extend(De.prototype,{xa:function(a,b){this.W=a;this.ja()||this.ua(this.W.ja());this.Ea=b;this.jb()},jb:function(){var a=this.ja(),a=ec.Ud.qg(a),a={markerId:this.kd,catalog:"FD01",name:this.jk(),rank:this.Ao(),x:a.x,y:a.y,color:this.cm(),hoverColor:this.XK,backgroundHoverColor:this.ZI,borderColor:this.borderColor,borderHoverColor:this.cJ,backgroundColor:this.backgroundColor,padding:this.padding,fontSize:this.fontSize,borderWidth:this.borderWidth};if(this.qD||this.getImageData())a.imageUrl=this.qD, a.imageData=this.getImageData(),a.size=this.Hb(),a.image=this.Gw(),a.catalog="FD02",this.Hb()&&(a.width=this.Hb()[0],a.height=this.Hb()[1]);this.Ea.OM(a)},hide:function(){this.Sa=t;this.Ea&&this.Ea.ko(this.kd,"visible",t)},show:function(){this.Sa=p;this.Ea&&this.Ea.ko(this.kd,"visible",p)},isVisible:x("Sa"),Hf:function(a,b){this.Ea&&("position"==a&&(b=ec.Ud.qg(b),b={lng:b.x,lat:b.y}),this.Ea.ko(this.kd,a,b))},remove:function(){this.dispatchEvent(new Q("onremove"),{type:"remove",target:this});this.Ea.CJ([this.kd])}});var nk={none:"",transit:"FE0A",hotel:"FE02",catering:"FE01",movie:"FE06",indoor_scene:"FEFE"},ok={none:["-1",""],transit:["0","m_transit.png"],hotel:["1","m_hotel.png"],catering:["2","m_catering.png"],movie:["3","m_movie.png"],transit:["4","m_transit.png"],indoor_scene:["5","m_indoor_scene.png"]}; z.extend(Ge.prototype,{xa:function(a,b){this.W=a;this.Ea=b;this.jb()},jb:function(){var a=this.ja(),a=ec.Ud.qg(a),b=this.XQ(),c=this.$C();this.Ea.OM({markerId:this.kd,catalog:b,name:this.Io(),rank:this.Ao(),x:a.x,y:a.y,heading:c.heading,pitch:c.pitch,pid:c.panoId,panoIId:c.panoIId})},XQ:function(){var a=this.Do().match(/.*\\/(.*)/)[1],b;for(b in ok)if(ok[b][1]==a)return nk[b]},hide:function(){this.Sa=t;this.Ea.ko(this.kd,"visible",t)},show:function(){this.Sa=p;this.Ea.ko(this.kd,"visible",p)},isVisible:x("Sa"), Hf:function(a,b){"position"==a&&(b=ec.Ud.qg(b),b={lng:b.x,lat:b.y});this.Ea.ko(this.kd,a,b)},remove:function(){this.dispatchEvent(new Q("onremove"),{type:"remove",target:this});this.Ea.CJ([this.kd])}});kk.En=new ec(s,{hf:"api"});function kk(a){z.lang.Ga.call(this);a&&(this.W=a,this.Dg=s,this.xG=a.P.clientWidth,this.wG=a.P.clientHeight,new mk(a,this))}kk.OO=D.Yh("pano");z.lang.wa(kk,z.lang.Ga,"PanoramaFlashWraper"); z.extend(kk.prototype,{OM:function(a){this.Pr("addMarkers",[a])},CJ:function(a){this.Pr("removeMarkers",[a])},ko:function(a,b,c){var e={};e.markerId=a;e[b]=c;this.set("markerProperty",e)},get:function(a){var b=s;"position"==a?(b=this.Dg.get("mercatorPosition"),b=ec.Ud.oj(new R(b.mercatorX,b.mercatorY))):b=this.Dg.get(a);return b},set:function(a,b){var c=this;"position"==a?kk.En.dj(b,function(a){a&&a.id?c.W.Cc(a.id):c.dispatchEvent(new Q("pano_error"))}):"id"==a?c.Dg==s?c.CR(c.W):c.Dg.set&&c.Dg.set("panoOptions", {id:b.id,panoType:b.type,width:c.xG,height:c.wG}):c.Dg&&c.Dg.set&&c.Dg.set(a,b)},Pr:function(a,b){return this.Dg.doAction(a,b)},B2:x("Lq"),CR:function(a){var b=this,c=a.m.swfSrc.match(/.*\\//)[0]+"BDStreetScape.swf";b.Dg=p;kk.En.Ow(function(e){var f="",g="";"inter"===a.Ie?g=a.bb:f=a.bb;f={pid:f,iid:g,panoType:a.Ie,heading:a.Ha.heading,pitch:a.Ha.pitch,width:b.xG,height:b.wG,panoUrl:c,panoTileUrl:kk.OO.join("|"),domain:ec.du,jsInterfaceNamespace:"BMap.PanoramaFlashInterface",swfIndex:b.ea};g=a.m.swfSrc; e&&(e.panoUdt&&e.panoUdt.version&&f)&&(f.udtVersion=e.panoUdt.version);e&&(e.panoSwfAPI&&e.panoSwfAPI.version&&f)&&(f.panoUrl=f.panoUrl+"?version="+e.panoSwfAPI.version,g=g+"?version="+e.panoSwfAPI.version);b.Dg=b.WP(a.P,f,g)})},WP:function(a,b,c){var e=new lk,f="PanoramaFlash"+this.ea,g=s,g=O("div");g.style.position="absolute";g.id="PanoramaFlashWraper"+this.ea;g.style.top="0";g.style.left="0";g.style.height="100%";g.style.width="100%";g.style.zIndex=1200;this.Lq=g;a.appendChild(g);e.create({id:f, width:"100%",height:"100%",allowscriptaccess:"always",scale:"showall",wmode:"opaque",quality:"best",url:c,ver:"10.2",errorMessage:"\\u60a8\\u672a\\u5b89\\u88c5Flash Player\\u64ad\\u653e\\u5668\\u6216\\u8005\\u7248\\u672c\\u8fc7\\u4f4e",vars:b},g);return e.HK(f)}});var pk=kk.prototype;U(pk,{get:pk.get,set:pk.set,doAction:pk.Pr}); ');
